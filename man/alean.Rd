% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/alean.R
\name{alean}
\alias{alean}
\title{Assumption Lean inference for generalized linear model parameters}
\usage{
alean(
  response.model,
  exposure.model,
  data,
  link = "identity",
  g.model,
  nfolds = 1,
  silent = FALSE,
  mc.cores,
  response_model = deprecated,
  exposure_model = deprecated,
  g_model = deprecated,
  ...
)
}
\arguments{
\item{response.model}{formula or ml_model object (formula => glm)}

\item{exposure.model}{model for the exposure}

\item{data}{data.frame}

\item{link}{Link function (g)}

\item{g.model}{Model for \eqn{E[g(Y|A,W)|W]}}

\item{nfolds}{Number of folds}

\item{silent}{Suppress all messages and progressbars}

\item{mc.cores}{Optional number of cores. When supplied, \link[parallel:mclapply]{parallel::mcmapply}
is used instead of \link[future.apply:future_mapply]{future.apply::future_mapply}}

\item{response_model}{Deprecated. Use response.model instead.}

\item{g_model}{Deprecated. Use g.model instead.}

\item{...}{additional arguments to \link[future.apply:future_mapply]{future.apply::future_mapply} or
\link[parallel:mclapply]{parallel::mclapply}}
}
\value{
alean.targeted object
}
\description{
Assumption lean inference via cross-fitting (Double ML). See
\url{http://doi.org/10.1111/rssb.12504}
}
\details{
Let \eqn{Y} be the response variable, \eqn{A} the exposure and \eqn{W}
covariates. The target parameter is: \deqn{\Psi(P) = \frac{E(Cov[A,
g\{E(Y|A,W)\}\mid W])} {E\{Var(A\mid W)\}} }

The \code{response.model} is the model for \eqn{E(Y|A,W)}, and
\code{exposure.model} is the model for \eqn{E(A|W)}.
\code{link} specifies \eqn{g}.
}
\examples{

sim1 <- function(n, family = gaussian(), ...) {
  m <- lvm() |>
    distribution(~y, binomial.lvm()) |>
    regression("a", value = function(l) l) |>
    regression("y", value = function(a, l) a + l)
  if (family$family == "binomial") {
    distribution(m, ~a) <- binomial.lvm()
  }
  sim(m, n)
}

library(splines)
f <- binomial()
d <- sim1(1e4, family = f)
e <- alean(
  response.model = ML(y ~ a + bs(l, df = 3), family = binomial),
  exposure.model = ML(a ~ bs(l, df = 3), family = f),
  data = d,
  link = "logit", mc.cores = 1, nfolds = 1
)
e

e <- alean(
  response.model = ML(y ~ a + l, family = binomial),
  exposure.model = ML(a ~ l),
  data = d,
  link = "logit", mc.cores = 1, nfolds = 1
)
e
}
\author{
Klaus KÃ¤hler Holst
}
