<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>R6 class for prediction models — learner • targeted</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="R6 class for prediction models — learner"><meta property="og:description" content="Interface for statistical and machine learning models to be used
for nuisance model estimation in targeted learning.
The following list provides an overview of constructors for many commonly
used models.
Regression and classification: learner_glm, learner_gam, learner_grf,
learner_hal, learner_glmnet_cv, learner_svm, learner_xgboost,
learner_mars
Regression: learner_isoreg
Classification: learner_naivebayes
Ensemble (super learner): learner_sl"><meta property="og:image" content="/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">targeted</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/predictionclass.html">Prediction model class (`learner`)</a>
    </li>
    <li>
      <a href="../articles/riskregression.html">Estimating a relative risk or risk difference with a binary exposure</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/kkholst/targeted/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>R6 class for prediction models</h1>
    <small class="dont-index">Source: <a href="https://github.com/kkholst/targeted/blob/deploy/R/learner.R" class="external-link"><code>R/learner.R</code></a></small>
    <div class="hidden name"><code>learner.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Interface for statistical and machine learning models to be used
for nuisance model estimation in targeted learning.</p>
<p>The following list provides an overview of constructors for many commonly
used models.</p>
<p>Regression and classification: <a href="learner_glm.html">learner_glm</a>, <a href="learner_gam.html">learner_gam</a>, <a href="learner_grf.html">learner_grf</a>,
<a href="learner_hal.html">learner_hal</a>, <a href="learner_glmnet_cv.html">learner_glmnet_cv</a>, <a href="learner_svm.html">learner_svm</a>, <a href="learner_xgboost.html">learner_xgboost</a>,
<a href="learner_mars.html">learner_mars</a> <br>
Regression: <a href="learner_isoreg.html">learner_isoreg</a> <br>
Classification: <a href="learner_naivebayes.html">learner_naivebayes</a> <br>
Ensemble (super learner): <a href="learner_sl.html">learner_sl</a></p>
    </div>


    <div id="author">
    <h2>Author</h2>
    <p>Klaus Kähler Holst, Benedikt Sommer</p>
    </div>
    <div id="public-fields">
    <h2>Public fields</h2>
    <p></p><div class="r6-fields"><dl><dt><code>info</code></dt>
<dd><p>Optional information/name of the model</p></dd>


</dl><p></p></div>
    </div>
    <div id="active-bindings">
    <h2>Active bindings</h2>
    <p></p><div class="r6-active-bindings"><dl><dt><code>clear</code></dt>
<dd><p>Remove fitted model from the learner object</p></dd>


<dt><code>fit</code></dt>
<dd><p>Return estimated model object.</p></dd>


<dt><code>formula</code></dt>
<dd><p>Return model formula. Use learner$update() to
update the formula.</p></dd>


</dl><p></p></div>
    </div>
    <div id="methods">
    <h2>Methods</h2>

<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-learner-new"><code>learner$new()</code></a></p></li>
<li><p><a href="#method-learner-estimate"><code>learner$estimate()</code></a></p></li>
<li><p><a href="#method-learner-predict"><code>learner$predict()</code></a></p></li>
<li><p><a href="#method-learner-update"><code>learner$update()</code></a></p></li>
<li><p><a href="#method-learner-print"><code>learner$print()</code></a></p></li>
<li><p><a href="#method-learner-summary"><code>learner$summary()</code></a></p></li>
<li><p><a href="#method-learner-response"><code>learner$response()</code></a></p></li>
<li><p><a href="#method-learner-design"><code>learner$design()</code></a></p></li>
<li><p><a href="#method-learner-opt"><code>learner$opt()</code></a></p></li>
<li><p><a href="#method-learner-clone"><code>learner$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-learner-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Create a new prediction model object</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/learner.html">learner</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  formula <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">estimate</span>,</span>
<span>  predict <span class="op">=</span> <span class="fu">stats</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span>,</span>
<span>  predict.args <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  estimate.args <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  info <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  specials <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  formula.keep.specials <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  intercept <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>formula</code></dt>
<dd><p>formula specifying outcome and design matrix</p></dd>


<dt><code>estimate</code></dt>
<dd><p>function for fitting the model. This must be a function
with response, 'y', and design matrix, 'x'. Alternatively, a function
with a formula and data argument. See the examples section.</p></dd>


<dt><code>predict</code></dt>
<dd><p>prediction function (must be a function of model
object, 'object', and new design matrix, 'newdata')</p></dd>


<dt><code>predict.args</code></dt>
<dd><p>optional arguments to prediction function</p></dd>


<dt><code>estimate.args</code></dt>
<dd><p>optional arguments to estimate function</p></dd>


<dt><code>info</code></dt>
<dd><p>optional description of the model</p></dd>


<dt><code>specials</code></dt>
<dd><p>optional specials terms (weights, offset,
id, subset, ...) passed on to <a href="design.html">design</a></p></dd>


<dt><code>formula.keep.specials</code></dt>
<dd><p>if TRUE then special terms defined by
<code>specials</code> will be removed from the formula before it is being passed to
the estimate print.function()</p></dd>


<dt><code>intercept</code></dt>
<dd><p>(logical) include intercept in design matrix</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-learner-estimate"></a><div class="section">
<h3 id="method-estimate-">Method <code><a href="https://kkholst.github.io/lava/reference/estimate.default.html" class="external-link">estimate()</a></code><a class="anchor" aria-label="anchor" href="#method-estimate-"></a></h3>
<p>Estimation method</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">learner</span><span class="op">$</span><span class="fu">estimate</span><span class="op">(</span><span class="va">data</span>, <span class="va">...</span>, store <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>data</code></dt>
<dd><p>data.frame</p></dd>


<dt><code>...</code></dt>
<dd><p>Additional arguments to estimation method</p></dd>


<dt><code>store</code></dt>
<dd><p>Logical determining if estimated model should be
stored inside the class.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-learner-predict"></a><div class="section">
<h3 id="method-predict-">Method <code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code><a class="anchor" aria-label="anchor" href="#method-predict-"></a></h3>
<p>Prediction method</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">learner</span><span class="op">$</span><span class="fu">predict</span><span class="op">(</span><span class="va">newdata</span>, <span class="va">...</span>, object <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>newdata</code></dt>
<dd><p>data.frame</p></dd>


<dt><code>...</code></dt>
<dd><p>Additional arguments to prediction method</p></dd>


<dt><code>object</code></dt>
<dd><p>Optional model fit object</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-learner-update"></a><div class="section">
<h3 id="method-update-">Method <code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update()</a></code><a class="anchor" aria-label="anchor" href="#method-update-"></a></h3>
<p>Update formula</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">learner</span><span class="op">$</span><span class="fu">update</span><span class="op">(</span><span class="va">formula</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>formula</code></dt>
<dd><p>formula or character which defines the new response</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-learner-print"></a><div class="section">
<h3 id="method-print-">Method <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code><a class="anchor" aria-label="anchor" href="#method-print-"></a></h3>
<p>Print method</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">learner</span><span class="op">$</span><span class="fu">print</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-learner-summary"></a><div class="section">
<h3 id="method-summary-">Method <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code><a class="anchor" aria-label="anchor" href="#method-summary-"></a></h3>
<p>Summary method to provide more extensive information than
learner$print().</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">learner</span><span class="op">$</span><span class="fu">summary</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>summarized_learner object, which is a list with the following
elements:</p><dl><dt>info</dt>
<dd><p>description of the learner</p></dd>

<dt>formula</dt>
<dd><p>formula specifying outcome and design matrix</p></dd>

<dt>estimate</dt>
<dd><p>function for fitting the model</p></dd>

<dt>estimate.args</dt>
<dd><p>arguments to estimate function</p></dd>

<dt>predict</dt>
<dd><p>function for making predictions from fitted model</p></dd>

<dt>predict.args</dt>
<dd><p>arguments to predict function</p></dd>

<dt>specials</dt>
<dd><p>provided special terms</p></dd>

<dt>intercept</dt>
<dd><p>include intercept in design matrix</p></dd>


</dl></div>
<div class="section">
<h4 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code><span><span class="va">lr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/learner_glm.html">learner_glm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">x</span>, family <span class="op">=</span> <span class="st">"nb"</span><span class="op">)</span></span>
<span><span class="va">lr</span><span class="op">$</span><span class="fu">summary</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">lr_sum</span> <span class="op">&lt;-</span> <span class="va">lr</span><span class="op">$</span><span class="fu">summary</span><span class="op">(</span><span class="op">)</span> <span class="co"># store returned summary in new object</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">lr_sum</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">lr_sum</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-learner-response"></a><div class="section">
<h3 id="method-response-">Method <code>response()</code><a class="anchor" aria-label="anchor" href="#method-response-"></a></h3>
<p>Extract response from data</p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">learner</span><span class="op">$</span><span class="fu">response</span><span class="op">(</span><span class="va">data</span>, eval <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>data</code></dt>
<dd><p>data.frame</p></dd>


<dt><code>eval</code></dt>
<dd><p>when FALSE return the untransformed outcome
(i.e., return 'a' if formula defined as I(a==1) ~ ...)</p></dd>


<dt><code>...</code></dt>
<dd><p>additional arguments to <a href="design.html">design</a></p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-learner-design"></a><div class="section">
<h3 id="method-design-">Method <code><a href="design.html">design()</a></code><a class="anchor" aria-label="anchor" href="#method-design-"></a></h3>
<p>Generate <a href="design.html">design</a> object (design matrix and response) from data</p><div class="section">
<h4 id="usage-7">Usage<a class="anchor" aria-label="anchor" href="#usage-7"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">learner</span><span class="op">$</span><span class="fu">design</span><span class="op">(</span><span class="va">data</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-5">Arguments<a class="anchor" aria-label="anchor" href="#arguments-5"></a></h4>
<p></p><div class="arguments"><dl><dt><code>data</code></dt>
<dd><p>data.frame</p></dd>


<dt><code>...</code></dt>
<dd><p>additional arguments to <a href="design.html">design</a></p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-learner-opt"></a><div class="section">
<h3 id="method-opt-">Method <code>opt()</code><a class="anchor" aria-label="anchor" href="#method-opt-"></a></h3>
<p>Get options</p><div class="section">
<h4 id="usage-8">Usage<a class="anchor" aria-label="anchor" href="#usage-8"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">learner</span><span class="op">$</span><span class="fu">opt</span><span class="op">(</span><span class="va">arg</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-6">Arguments<a class="anchor" aria-label="anchor" href="#arguments-6"></a></h4>
<p></p><div class="arguments"><dl><dt><code>arg</code></dt>
<dd><p>name of option to get value of</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-learner-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-9">Usage<a class="anchor" aria-label="anchor" href="#usage-9"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">learner</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-7">Arguments<a class="anchor" aria-label="anchor" href="#arguments-7"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">formula</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">learner</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">formula</span>,</span></span>
<span class="r-in"><span>    info <span class="op">=</span> <span class="st">"grf::probability_forest"</span>,</span></span>
<span class="r-in"><span>    estimate <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>      <span class="fu">grf</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/grf/man/probability_forest.html" class="external-link">probability_forest</a></span><span class="op">(</span>X <span class="op">=</span> <span class="va">x</span>, Y <span class="op">=</span> <span class="va">y</span>, <span class="va">...</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">}</span>,</span></span>
<span class="r-in"><span>    predict <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">object</span>, <span class="va">newdata</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">newdata</span><span class="op">)</span><span class="op">$</span><span class="va">predictions</span></span></span>
<span class="r-in"><span>    <span class="op">}</span>,</span></span>
<span class="r-in"><span>    estimate.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">args</span> <span class="op">&lt;-</span> <span class="fu"><a href="expand.list.html">expand.list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  num.trees <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">200</span><span class="op">)</span>, mtry <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>,</span></span>
<span class="r-in"><span>  formula <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">Species</span> <span class="op">~</span> <span class="va">.</span>, <span class="va">Species</span> <span class="op">~</span> <span class="va">Sepal.Length</span> <span class="op">+</span> <span class="va">Sepal.Width</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">models</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">args</span>, <span class="kw">function</span><span class="op">(</span><span class="va">par</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rf</span>, <span class="va">par</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">models</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x</span><span class="op">$</span><span class="fu">estimate</span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">x</span>, newdata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         setosa  versicolor   virginica</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.9820000 0.001833333 0.016166667</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] 0.9431825 0.052595238 0.004222222</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] 0.9858730 0.009047619 0.005079365</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] 0.9783730 0.016547619 0.005079365</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,] 0.9820000 0.001833333 0.016166667</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [6,] 0.9119127 0.060492063 0.027595238</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># Reduce Ex. timing</span></span></span>
<span class="r-in"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">targeted</span><span class="fu">::</span><span class="fu"><a href="cv.default.html">cv</a></span><span class="op">(</span><span class="va">models</span>, data <span class="op">=</span> <span class="va">iris</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">args</span>, <span class="st">"table"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              brier -logscore num.trees mtry</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> model1  0.09174485 0.2054654       100    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> model2  0.09520162 0.2144675       200    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> model3  0.08360182 0.1833965       100    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> model4  0.08541814 0.1845019       200    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> model5  0.07572792 0.1602475       100    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> model6  0.07764519 0.1647030       200    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> model7  0.34626400 0.5640032       100    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> model8  0.34910402 0.5639633       200    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> model9  0.34603105 0.5566681       100    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> model10 0.34599329 0.5632747       200    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> model11 0.34506560 0.5573672       100    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> model12 0.34878419 0.5620248       200    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                      formula</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> model1                           Species ~ .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> model2                           Species ~ .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> model3                           Species ~ .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> model4                           Species ~ .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> model5                           Species ~ .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> model6                           Species ~ .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> model7  Species ~ Sepal.Length + Sepal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> model8  Species ~ Sepal.Length + Sepal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> model9  Species ~ Sepal.Length + Sepal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> model10 Species ~ Sepal.Length + Sepal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> model11 Species ~ Sepal.Length + Sepal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> model12 Species ~ Sepal.Length + Sepal.Width</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># defining learner via function with arguments y (response)</span></span></span>
<span class="r-in"><span><span class="co"># and x (design matrix)</span></span></span>
<span class="r-in"><span><span class="va">f1</span> <span class="op">&lt;-</span> <span class="va">learner</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span></span>
<span class="r-in"><span>  estimate <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">y</span>, <span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/lmfit.html" class="external-link">lm.fit</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  predict <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">object</span>, <span class="va">newdata</span><span class="op">)</span> <span class="va">newdata</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="va">object</span><span class="op">$</span><span class="va">coefficients</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># defining the learner via arguments formula and data</span></span></span>
<span class="r-in"><span><span class="va">f2</span> <span class="op">&lt;-</span> <span class="va">learner</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span></span>
<span class="r-in"><span>  estimate <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">formula</span>, <span class="va">data</span>, <span class="va">...</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">formula</span>, <span class="va">data</span>, <span class="va">...</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># generic learner defined from function (predict method derived per default</span></span></span>
<span class="r-in"><span><span class="co"># from stats::predict</span></span></span>
<span class="r-in"><span><span class="va">f3</span> <span class="op">&lt;-</span> <span class="va">learner</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span></span>
<span class="r-in"><span>  estimate <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">dt</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">x</span>, data <span class="op">=</span> <span class="va">dt</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `learner$summary`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">lr</span> <span class="op">&lt;-</span> <span class="fu"><a href="learner_glm.html">learner_glm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">x</span>, family <span class="op">=</span> <span class="st">"nb"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lr</span><span class="op">$</span><span class="fu">summary</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ────────── learner object ──────────</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> glm </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> formula: y ~ x &lt;environment: 0x55809ab3a660&gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> estimate: formula, data, family, ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> estimate.args: family=nb </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> predict: object, newdata, ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> predict.args:   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> specials:  </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">lr_sum</span> <span class="op">&lt;-</span> <span class="va">lr</span><span class="op">$</span><span class="fu">summary</span><span class="op">(</span><span class="op">)</span> <span class="co"># store returned summary in new object</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">lr_sum</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "formula"       "info"          "estimate.args" "predict.args" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5] "estimate"      "predict"       "specials"      "intercept"    </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">lr_sum</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ────────── learner object ──────────</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> glm </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> formula: y ~ x &lt;environment: 0x55809ab3a660&gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> estimate: formula, data, family, ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> estimate.args: family=nb </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> predict: object, newdata, ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> predict.args:   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> specials:  </span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Klaus K. Holst, Benedikt Sommer, Andreas Nordland.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

